async function handleGetTempLink() {
    if (!window.saveData) {
        alert('No data loaded. Please load a file first.');
        return;
    }

    statusBar.style.color = 'var(--text-color)';
    statusBar.textContent = 'Uploading to Filebin... (this can take a moment)';

    try {
        const content = JSON.stringify(window.saveData);
        
        // 1. CRITICAL FIX: Create a generic Blob with NO MIME type. 
        // This stops the browser from adding the restrictive 'Content-Type: application/json' header.
        const rawBlob = new Blob([content]);
        
        // 2. Construct the unique bin name and the final RAW URL
        const binName = Math.random().toString(36).substring(2, 12);
        // The upload target URL is the direct path (bin URL + filename).
        const rawUrl = `https://filebin.net/${binName}/${currentFileName}`;

        // 3. Perform the upload request
        const response = await fetch(rawUrl, {
            method: 'POST',
            body: rawBlob, // Upload the raw content
            // ABSOLUTELY NO HEADERS OBJECT HERE. Let the browser handle everything else.
        });
        
        if (!response.ok) {
            // Attempt to read error body for debugging
            const errorText = await response.text();
            throw new Error(`Filebin API failed. Status: ${response.status}. Response: ${errorText}`);
        }

        // If the response is OK, the rawUrl is valid.
        
        statusBar.style.color = 'var(--success-color)';
        statusBar.textContent = '✅ Success! Direct link created. It will expire in 6 days.';
        
        // 4. Prompt the user with the direct RAW URL
        prompt("Copy this direct link and paste it into Hoop Land:", rawUrl);

    } catch (error) {
        statusBar.style.color = 'var(--error-color)';
        statusBar.textContent = `❌ Could not create link. Check the console (F12) for details.`;
        console.error("Link Creation Failed:", error);
        console.warn("If this still fails, Filebin has restricted its CORS policy. Time to switch services.");
    }
}
