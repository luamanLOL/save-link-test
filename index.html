async function handleGetTempLink() {
    if (!window.saveData) {
        alert('No data loaded. Please load a file first.');
        return;
    }

    statusBar.style.color = 'var(--text-color)';
    statusBar.textContent = 'Uploading to Filebin... (this can take a moment)';

    try {
        const content = JSON.stringify(window.saveData);
        
        // 1. CRITICAL FIX: Create a generic Blob with NO MIME type. 
        // This stops the browser from adding the restrictive 'Content-Type: application/json'.
        const rawBlob = new Blob([content]);
        
        // 2. Construct the unique bin name and the target URL
        const binName = Math.random().toString(36).substring(2, 12);
        
        // Target URL is the BIN URL only, WITHOUT the filename.
        // We will pass the filename as a header or append it to the path in a moment.
        const binApiUrl = `https://filebin.net/${binName}`;

        // 3. Perform the upload request (POST to the bin URL)
        const response = await fetch(`${binApiUrl}/${currentFileName}`, {
            method: 'POST',
            body: rawBlob, // Upload the raw content
            // Filebin expects the filename in the path, so we use `${binApiUrl}/${currentFileName}`.
            // Still NO custom headers!
        });
        
        if (!response.ok) {
            // Read error body for debugging
            const errorText = await response.text();
            throw new Error(`Filebin API failed. Status: ${response.status}. Response: ${errorText}`);
        }

        // The raw download URL must be manually constructed using the successful path.
        const rawUrl = `${binApiUrl}/${currentFileName}`;
        
        statusBar.style.color = 'var(--success-color)';
        statusBar.textContent = '✅ Success! Direct link created. It will expire in 6 days.';
        
        // 4. Prompt the user with the direct RAW URL
        prompt("Copy this direct link and paste it into Hoop Land:", rawUrl);

    } catch (error) {
        statusBar.style.color = 'var(--error-color)';
        statusBar.textContent = `❌ Could not create link. Check the console (F12) for details.`;
        console.error("Link Creation Failed:", error);
        console.warn("If this still fails, Filebin has likely restricted their CORS policy. You MUST switch to a service like AWS S3 with Pre-Signed URLs.");
    }
}
